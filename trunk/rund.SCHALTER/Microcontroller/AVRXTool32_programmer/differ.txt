【Win32版での変更点】
							November 11, 2004


AVRPPは、DOS版のAVRXPを、AVRSPは、DOS版のAVRXSとAVRSSを一つにまとめてWin32
アプリケーションとして書き直したものです。機能的にはほとんど変わっていません。
このドキュメントではそれらとの相違点を解説しています。



●オプションの指定方法
 コマンドラインオプションのスイッチキャラクタは、DOS版では '/' でしたが、
Win32版では '-' に変更されています。また、オプションコマンドの省略時のデ
フォルトは、avr?p.iniで設定できます。


●ポートの指定方法
AVRSPでは LPT用とCOM用が一つになったので、ポート指定方法が変更されています。

例： -pc1 (COM1ダイレクト) ※デフォルト
     -pl1 (LPT1ダイレクト)
     -pb3 (COM3 SPIブリッジ)


●ヒューズ値の指定方法
 16進表記から2進表記に変更しましたので、十分に注意してください。無効ビット(-)
には0/1どちらかを指定します。先行する0は省略できますが、常に省略しない方が設定
ミスが減ります。

DOS版    /fl36
Win32版  -fl110110


●Windows NT/2k/XPでの使用
 これらのOSではI/O操作のためにGIVEIOが必要です。GIVEIOが既にSCMに登録済みで
動作中の場合はすぐに使用できます。GIVEIOが未インストールの場合は、GIVEIO.SYS
をシステムディレクトリに放り込んでからAVRSPかAVRPPを使用すれば自動登録される
ので、面倒なインストール作業は必要ありません。ただし、Administrator権限でロ
グインしている必要があります。
 なお、COMポートをAPI経由(-pv/-pb)で使用する場合は、GIVEIOは必要ありません。

>move giveio.sys %windir%\system32
>avrsp -r

で "I/O driver initialization failed." 以外のメッセージならインストールは
成功しています。


●ポート番号と物理アドレスの対応
 DOS版ではポートの物理アドレスをBIOSから取得していましたが、Win32版では
プログラムで決め打ちしています。(hwctrl.h参照)


●対応HEXファイル
 インテルHEXフォーマットのほか、新たにモトローラSフォーマットに対応していま
す。フォーマットの異なる行が一つのファイルに混在していても読み込み可能です。


●I/Oディレイ値の参考値(avrss/avrxs/avrsp共通)
 値が小さいほど転送速度が高速になりますが、AVRの動作クロックにより設定できる
下限値は制限されてきます。特に1MHz未満の低速クロックで動作しているときは意識
して設定する必要があります。

 -d0  4MHz以上
 -d3  1MHz以上 (デフォルト)
 -d100  32kHz


●記述言語
 asmからcに変更しています。他のプラットホームへの移植や研究、カスタマイズな
ど、ご自由にお使いください。プラットホーム強依存部は hwctrl.c だけです。


ChaN
